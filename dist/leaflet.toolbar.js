(t=>{t.L.Toolbar2=(L.Layer||L.Class).extend({statics:{baseClass:"leaflet-toolbar"},options:{className:"",filter:function(){return!0},actions:[]},initialize:function(t){L.setOptions(this,t),this._toolbar_type=this.constructor._toolbar_class_id},addTo:function(t){return this._arguments=[].slice.call(arguments),t.addLayer(this),this},onAdd:function(t){var o=t._toolbars[this._toolbar_type];0===this._calculateDepth()&&(o&&t.removeLayer(o),t._toolbars[this._toolbar_type]=this)},onRemove:function(t){var o,i,e;if(this._ul&&this._disabledEvents)for(o=0,i=this._disabledEvents.length;o<i;o++)L.DomEvent.off(this._ul,this._disabledEvents[o],L.DomEvent.stopPropagation);if(this._actionInstances){for(o=0,i=this._actionInstances.length;o<i;o++)(e=this._actionInstances[o])&&e._link&&L.DomEvent.off(e._link,"click",e.enable,e),e&&e.destroy&&e.destroy();this._actionInstances=null}0===this._calculateDepth()&&delete t._toolbars[this._toolbar_type]},appendToContainer:function(t){var o,i,e,n,s,a=this.constructor.baseClass+"-"+this._calculateDepth()+" "+this.options.className;if(this._ul&&this._disabledEvents)for(e=0,s=this._disabledEvents.length;e<s;e++)L.DomEvent.off(this._ul,this._disabledEvents[e],L.DomEvent.stopPropagation);if(this._actionInstances){for(i=0,n=this._actionInstances.length;i<n;i++)(o=this._actionInstances[i])&&o._link&&L.DomEvent.off(o._link,"click",o.enable,o),o&&o.destroy&&o.destroy();this._actionInstances=null}for(this._container=t,this._ul=L.DomUtil.create("ul",a,t),this._disabledEvents=["click","mousemove","dblclick","mousedown","mouseup","touchstart"],e=0,s=this._disabledEvents.length;e<s;e++)L.DomEvent.on(this._ul,this._disabledEvents[e],L.DomEvent.stopPropagation);for(this._actionInstances=[],i=0,n=this.options.actions.length;i<n;i++)(o=new(this._getActionConstructor(this.options.actions[i])))._createIcon(this,this._ul,this._arguments),this._actionInstances.push(o)},_getActionConstructor:function(o){var t=this._arguments,i=this;return o.extend({initialize:function(){o.prototype.initialize.apply(this,t)},enable:function(t){i._active&&i._active.disable(),i._active=this,o.prototype.enable.call(this,t)}})},_hide:function(){this._ul.style.display="none"},_show:function(){this._ul.style.display="block"},_calculateDepth:function(){for(var t=0,o=this.parentToolbar;o;)t+=1,o=o.parentToolbar;return t}}),L.Evented||L.Toolbar2.include(L.Mixin.Events),L.toolbar={};var i=0;L.Toolbar2.extend=function(t){var o=L.extend({},t.statics,{_toolbar_class_id:i});return i+=1,L.extend(t,{statics:o}),L.Class.extend.call(this,t)},L.Map.addInitHook(function(){this._toolbars={}}),L.Toolbar2.Action=L.Handler.extend({statics:{baseClass:"leaflet-toolbar-icon"},options:{toolbarIcon:{html:"",className:"",tooltip:""},subToolbar:new L.Toolbar2},initialize:function(t){var o=L.Toolbar2.Action.prototype.options.toolbarIcon;L.setOptions(this,t),this.options.toolbarIcon=L.extend({},o,this.options.toolbarIcon)},enable:function(t){t&&L.DomEvent.preventDefault(t),this._enabled||(this._enabled=!0,this.addHooks&&this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks)&&this.removeHooks()},_createIcon:function(t,o,i){var e=this.options.toolbarIcon;this.toolbar=t,this._icon=L.DomUtil.create("li","",o),this._link=L.DomUtil.create("a","",this._icon),this._link.innerHTML=e.html,this._link.setAttribute("href","#"),this._link.setAttribute("title",e.tooltip),L.DomUtil.addClass(this._link,this.constructor.baseClass),e.className&&L.DomUtil.addClass(this._link,e.className),L.DomEvent.on(this._link,"click",this.enable,this),this._addSubToolbar(t,this._icon,i)},_addSubToolbar:function(t,o,i){var e=this.options.subToolbar,n=this.addHooks,s=this.removeHooks;e.parentToolbar=t,0<e.options.actions.length&&((i=[].slice.call(i)).push(this),e.addTo.apply(e,i),e.appendToContainer(o),this.addHooks=function(t){"function"==typeof n&&n.call(this,t),e._show()},this.removeHooks=function(t){"function"==typeof s&&s.call(this,t),e._hide()},this._subToolbar=e)},destroy:function(){var t;this._subToolbar&&((t=this._subToolbar._arguments&&this._subToolbar._arguments[0])&&t.hasLayer&&t.hasLayer(this._subToolbar)&&t.removeLayer(this._subToolbar),this._subToolbar=null)}}),L.toolbarAction=function(t){return new L.Toolbar2.Action(t)},L.Toolbar2.Action.extendOptions=function(t){return this.extend({options:t})},L.Toolbar2.Control=L.Toolbar2.extend({statics:{baseClass:"leaflet-control-toolbar "+L.Toolbar2.baseClass},initialize:function(t){L.Toolbar2.prototype.initialize.call(this,t),this._control=new L.Control.Toolbar(this.options)},onAdd:function(t){this._control.addTo(t),L.Toolbar2.prototype.onAdd.call(this,t),this.appendToContainer(this._control.getContainer())},onRemove:function(t){L.Toolbar2.prototype.onRemove.call(this,t),this._control.remove?this._control.remove():this._control.removeFrom(t)}}),L.Control.Toolbar=L.Control.extend({onAdd:function(){return L.DomUtil.create("div","")}}),L.toolbar.control=function(t){return new L.Toolbar2.Control(t)},L.Toolbar2.Popup=L.Toolbar2.extend({statics:{baseClass:"leaflet-popup-toolbar "+L.Toolbar2.baseClass},options:{anchor:[0,0]},initialize:function(t,o){L.Toolbar2.prototype.initialize.call(this,o),this._marker=new L.Marker(t,{icon:new L.DivIcon({className:this.options.className,iconAnchor:[0,0]})})},onAdd:function(t){this._map=t,this._marker.addTo(t),L.Toolbar2.prototype.onAdd.call(this,t),this.appendToContainer(this._marker._icon),this._setStyles()},onRemove:function(t){t.removeLayer(this._marker),L.Toolbar2.prototype.onRemove.call(this,t),delete this._map},setLatLng:function(t){return this._marker.setLatLng(t),this},_setStyles:function(){for(var t,o,i=this._container,e=this._ul,n=L.point(this.options.anchor),s=e.querySelectorAll(".leaflet-toolbar-icon"),a=[],l=0,r=0,h=s.length;r<h;r++)s[r].parentNode.parentNode===e&&(a.push(parseInt(L.DomUtil.getStyle(s[r],"height"),10)),l=(l+=Math.ceil(parseFloat(L.DomUtil.getStyle(s[r],"width"))))+Math.ceil(parseFloat(L.DomUtil.getStyle(s[r],"border-right-width"))));e.style.width=l+"px",this._tipContainer=L.DomUtil.create("div","leaflet-toolbar-tip-container",i),this._tipContainer.style.width=l+Math.ceil(parseFloat(L.DomUtil.getStyle(e,"border-left-width")))+"px",this._tip=L.DomUtil.create("div","leaflet-toolbar-tip",this._tipContainer),o=Math.max.apply(void 0,a),e.style.height=o+"px",t=parseInt(L.DomUtil.getStyle(this._tip,"width"),10),o=new L.Point(l/2,o+1.414*t),i.style.marginLeft=n.x-o.x+"px",i.style.marginTop=n.y-o.y+"px"}}),L.toolbar.popup=function(t){return new L.Toolbar2.Popup(t)}})(window,document);